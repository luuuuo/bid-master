{"abi":[{"type":"constructor","inputs":[],"stateMutability":"payable"},{"type":"function","name":"abort","inputs":[],"outputs":[],"stateMutability":"nonpayable"},{"type":"function","name":"buyer","inputs":[],"outputs":[{"name":"","type":"address","internalType":"address payable"}],"stateMutability":"view"},{"type":"function","name":"confirmPurchase","inputs":[],"outputs":[],"stateMutability":"payable"},{"type":"function","name":"confirmReceived","inputs":[],"outputs":[],"stateMutability":"nonpayable"},{"type":"function","name":"refundSeller","inputs":[],"outputs":[],"stateMutability":"nonpayable"},{"type":"function","name":"seller","inputs":[],"outputs":[{"name":"","type":"address","internalType":"address payable"}],"stateMutability":"view"},{"type":"function","name":"state","inputs":[],"outputs":[{"name":"","type":"uint8","internalType":"enum Purchase.State"}],"stateMutability":"view"},{"type":"function","name":"value","inputs":[],"outputs":[{"name":"","type":"uint256","internalType":"uint256"}],"stateMutability":"view"},{"type":"event","name":"Aborted","inputs":[],"anonymous":false},{"type":"event","name":"ItemReceived","inputs":[],"anonymous":false},{"type":"event","name":"PurchaseConfirmed","inputs":[],"anonymous":false},{"type":"event","name":"SellerRefunded","inputs":[],"anonymous":false},{"type":"error","name":"InvalidState","inputs":[]},{"type":"error","name":"OnlyBuyer","inputs":[]},{"type":"error","name":"OnlySeller","inputs":[]},{"type":"error","name":"ValueNotEven","inputs":[]}],"bytecode":{"object":"0x60806040819052600180546001600160a01b03191633178155349081901c6000556001198116036100395760405161046490816100498239f35b635f1f262160e11b8152600490fdfe6080604081815260048036101561001557600080fd5b600092833560e01c90816308551a53146104095750806335a063b4146103705780633fa4f245146103535780637150d8ae1461032a57806373fac6f01461026f578063c19d93fb1461022d578063c7981b1b146101395763d69606971461007b57600080fd5b82600319360112610135576002549160ff8360a01c16828110156101225761011557508254906001600160ff1b0382168203610102575060011b34036100fe577fd5d55c8a68912e9a110618df8d5e2e83b8d83211c57a8ddd1203df92885dc8818280a16001600160a81b0319163360ff60a01b191617600160a01b1760025580f35b5080fd5b634e487b7160e01b845260119052602483fd5b5163baf3f0f760e01b8152fd5b634e487b7160e01b855260218352602485fd5b8280fd5b50346101355782600319360112610135576001546001600160a01b03163381900361021e5760025460ff8160a01c168381101561020b576002036101fb577ffda69c32bcfdba840a167777906b173b607eb8b4d8853b97a80d26e613d858db8580a160ff60a01b1916600360a01b17600255835460038181029391908404036101e857508380809381938282156101df575bf1156101d5575080f35b51903d90823e3d90fd5b506108fc6101cb565b634e487b7160e01b855260119052602484fd5b835163baf3f0f760e01b81528390fd5b634e487b7160e01b865260218452602486fd5b5090516342e8fb9360e11b8152fd5b509190346100fe57816003193601126100fe5760ff60025460a01c169051918382101561025c57602083838152f35b634e487b7160e01b815260218452602490fd5b50346101355782600319360112610135576002546001600160a01b038116913383900361031c5760ff8260a01c1681811015610309576001036102fb57508380809381937fe89152acd703c9d8c7d28829d443260b411454d45394e7995815140c8cbcbcf78380a160ff60a01b1916600160a11b176002558154908282156101df57f1156101d5575080f35b835163baf3f0f760e01b8152fd5b634e487b7160e01b865260218252602486fd5b83516386efbb5560e01b8152fd5b5050346100fe57816003193601126100fe5760025490516001600160a01b039091168152602090f35b5050346100fe57816003193601126100fe57602091549051908152f35b50346101355782600319360112610135576001546001600160a01b031690338290036103fb576002549060ff8260a01c1681811015610309576102fb57508380809381937f72c874aeff0b183a56e2b79c71b46e1aed4dee5e09862134b8821ba2fddbf8bf8380a160ff60a01b1916600360a01b1760025547908282156101df57f1156101d5575080f35b82516342e8fb9360e11b8152fd5b8490346100fe57816003193601126100fe576001546001600160a01b03168152602090f3fea2646970667358221220e472f1b46fa646ab6b3e93c117c76d1a92bd61983ac6459f9df1b3e5b071d28864736f6c63430008120033","sourceMap":"1024:3170:37:-:0;;;;;;;;-1:-1:-1;;;;;;1024:3170:37;2358:10;1024:3170;;;2388:9;1024:3170;;;;-1:-1:-1;1024:3170:37;-1:-1:-1;;1024:3170:37;;2416:24;2412:51;;1024:3170;;;;;;;;;2412:51;-1:-1:-1;;;2449:14:37;;;;","linkReferences":{}},"deployedBytecode":{"object":"0x6080604081815260048036101561001557600080fd5b600092833560e01c90816308551a53146104095750806335a063b4146103705780633fa4f245146103535780637150d8ae1461032a57806373fac6f01461026f578063c19d93fb1461022d578063c7981b1b146101395763d69606971461007b57600080fd5b82600319360112610135576002549160ff8360a01c16828110156101225761011557508254906001600160ff1b0382168203610102575060011b34036100fe577fd5d55c8a68912e9a110618df8d5e2e83b8d83211c57a8ddd1203df92885dc8818280a16001600160a81b0319163360ff60a01b191617600160a01b1760025580f35b5080fd5b634e487b7160e01b845260119052602483fd5b5163baf3f0f760e01b8152fd5b634e487b7160e01b855260218352602485fd5b8280fd5b50346101355782600319360112610135576001546001600160a01b03163381900361021e5760025460ff8160a01c168381101561020b576002036101fb577ffda69c32bcfdba840a167777906b173b607eb8b4d8853b97a80d26e613d858db8580a160ff60a01b1916600360a01b17600255835460038181029391908404036101e857508380809381938282156101df575bf1156101d5575080f35b51903d90823e3d90fd5b506108fc6101cb565b634e487b7160e01b855260119052602484fd5b835163baf3f0f760e01b81528390fd5b634e487b7160e01b865260218452602486fd5b5090516342e8fb9360e11b8152fd5b509190346100fe57816003193601126100fe5760ff60025460a01c169051918382101561025c57602083838152f35b634e487b7160e01b815260218452602490fd5b50346101355782600319360112610135576002546001600160a01b038116913383900361031c5760ff8260a01c1681811015610309576001036102fb57508380809381937fe89152acd703c9d8c7d28829d443260b411454d45394e7995815140c8cbcbcf78380a160ff60a01b1916600160a11b176002558154908282156101df57f1156101d5575080f35b835163baf3f0f760e01b8152fd5b634e487b7160e01b865260218252602486fd5b83516386efbb5560e01b8152fd5b5050346100fe57816003193601126100fe5760025490516001600160a01b039091168152602090f35b5050346100fe57816003193601126100fe57602091549051908152f35b50346101355782600319360112610135576001546001600160a01b031690338290036103fb576002549060ff8260a01c1681811015610309576102fb57508380809381937f72c874aeff0b183a56e2b79c71b46e1aed4dee5e09862134b8821ba2fddbf8bf8380a160ff60a01b1916600360a01b1760025547908282156101df57f1156101d5575080f35b82516342e8fb9360e11b8152fd5b8490346100fe57816003193601126100fe576001546001600160a01b03168152602090f3fea2646970667358221220e472f1b46fa646ab6b3e93c117c76d1a92bd61983ac6459f9df1b3e5b071d28864736f6c63430008120033","sourceMap":"1024:3170:37:-:0;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;1988:5;1024:3170;;;;;;;;;;;;;1984:42;;-1:-1:-1;1024:3170:37;;;-1:-1:-1;;;;;1024:3170:37;;;;;;;;;3219:9;:24;1024:3170;;3266:19;;;;-1:-1:-1;;;;;;1024:3170:37;3312:10;-1:-1:-1;;;;1024:3170:37;;-1:-1:-1;;;1024:3170:37;1988:5;1024:3170;;;;;;;;-1:-1:-1;;;1024:3170:37;;;;;;;;1984:42;1024:3170;-1:-1:-1;;;2012:14:37;;;1024:3170;-1:-1:-1;;;1024:3170:37;;;;;;;;;;;;;;;;;;;;;;;;;;;-1:-1:-1;;;;;1024:3170:37;1873:10;:20;;;1869:45;;3922:13;1024:3170;;;;;;;;;;;;3922:13;1988:15;1984:42;;3953:16;;;;-1:-1:-1;;;;1024:3170:37;-1:-1:-1;;;1024:3170:37;3922:13;1024:3170;;;;;;;;;;;;;;;4157:26;;;;;;;;;;;;1024:3170;4157:26;;;;1024:3170;;;4157:26;1024:3170;;;;;;;;;4157:26;;;;;1024:3170;-1:-1:-1;;;1024:3170:37;;;;;;;;1984:42;1024:3170;;-1:-1:-1;;;2012:14:37;;1024:3170;;2012:14;1024:3170;-1:-1:-1;;;1024:3170:37;;;;;;;;1869:45;-1:-1:-1;1024:3170:37;;-1:-1:-1;;;1902:12:37;;;1024:3170;;;;;;;;;;;;;;;;1317:18;1024:3170;;;;;;;;;;;;;;;;;;;;-1:-1:-1;;;1024:3170:37;;;;;;;;;;;;;;;;;;;;;1783:5;1024:3170;-1:-1:-1;;;;;1024:3170:37;;;1769:10;:19;;;1765:43;;1024:3170;;;;;;;;;;;;1988:15;1984:42;;3552:14;;;;;;;;;;;-1:-1:-1;;;;1024:3170:37;-1:-1:-1;;;1024:3170:37;1783:5;1024:3170;;;;;3753:21;;;;;;;;1024:3170;;;1984:42;1024:3170;;-1:-1:-1;;;2012:14:37;;;1024:3170;-1:-1:-1;;;1024:3170:37;;;;;;;;1765:43;1024:3170;;-1:-1:-1;;;1797:11:37;;;1024:3170;;;;;;;;;;;;;;1112:28;1024:3170;;;-1:-1:-1;;;;;1024:3170:37;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;-1:-1:-1;;;;;1024:3170:37;;1873:10;:20;;;1869:45;;1988:5;1024:3170;;;;;;;;;;;;;1984:42;;2650:9;;;;;;;;;;;-1:-1:-1;;;;1024:3170:37;-1:-1:-1;;;1024:3170:37;1988:5;1024:3170;2926:21;;2910:38;;;;;;;;;1024:3170;;;1869:45;1024:3170;;-1:-1:-1;;;1902:12:37;;;1024:3170;;;;;;;;;;;;;;;;-1:-1:-1;;;;;1024:3170:37;;;;;","linkReferences":{}},"methodIdentifiers":{"abort()":"35a063b4","buyer()":"7150d8ae","confirmPurchase()":"d6960697","confirmReceived()":"73fac6f0","refundSeller()":"c7981b1b","seller()":"08551a53","state()":"c19d93fb","value()":"3fa4f245"},"rawMetadata":"{\"compiler\":{\"version\":\"0.8.18+commit.87f61d96\"},\"language\":\"Solidity\",\"output\":{\"abi\":[{\"inputs\":[],\"stateMutability\":\"payable\",\"type\":\"constructor\"},{\"inputs\":[],\"name\":\"InvalidState\",\"type\":\"error\"},{\"inputs\":[],\"name\":\"OnlyBuyer\",\"type\":\"error\"},{\"inputs\":[],\"name\":\"OnlySeller\",\"type\":\"error\"},{\"inputs\":[],\"name\":\"ValueNotEven\",\"type\":\"error\"},{\"anonymous\":false,\"inputs\":[],\"name\":\"Aborted\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[],\"name\":\"ItemReceived\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[],\"name\":\"PurchaseConfirmed\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[],\"name\":\"SellerRefunded\",\"type\":\"event\"},{\"inputs\":[],\"name\":\"abort\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"buyer\",\"outputs\":[{\"internalType\":\"address payable\",\"name\":\"\",\"type\":\"address\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"confirmPurchase\",\"outputs\":[],\"stateMutability\":\"payable\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"confirmReceived\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"refundSeller\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"seller\",\"outputs\":[{\"internalType\":\"address payable\",\"name\":\"\",\"type\":\"address\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"state\",\"outputs\":[{\"internalType\":\"enum Purchase.State\",\"name\":\"\",\"type\":\"uint8\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"value\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"\",\"type\":\"uint256\"}],\"stateMutability\":\"view\",\"type\":\"function\"}],\"devdoc\":{\"kind\":\"dev\",\"methods\":{},\"version\":1},\"userdoc\":{\"errors\":{\"InvalidState()\":[{\"notice\":\"\\u5728\\u5f53\\u524d\\u72b6\\u6001\\u4e0b\\u4e0d\\u80fd\\u8c03\\u7528\\u8be5\\u51fd\\u6570\\u3002\"}],\"OnlyBuyer()\":[{\"notice\":\"\\u53ea\\u6709\\u4e70\\u65b9\\u53ef\\u4ee5\\u8c03\\u7528\\u8fd9\\u4e2a\\u51fd\\u6570\\u3002\"}],\"OnlySeller()\":[{\"notice\":\"\\u53ea\\u6709\\u5356\\u65b9\\u53ef\\u4ee5\\u8c03\\u7528\\u8fd9\\u4e2a\\u51fd\\u6570\\u3002\"}],\"ValueNotEven()\":[{\"notice\":\"\\u63d0\\u4f9b\\u7684\\u503c\\u5fc5\\u987b\\u662f\\u5076\\u6570\\u3002\"}]},\"kind\":\"user\",\"methods\":{\"abort()\":{\"notice\":\"\\u7ec8\\u6b62\\u8d2d\\u4e70\\u5e76\\u6536\\u56de ether\\u3002 \\u53ea\\u80fd\\u7531\\u5356\\u65b9\\u5728\\u5408\\u540c\\u9501\\u5b9a\\u524d\\u80fd\\u8c03\\u7528\\u3002\"},\"confirmPurchase()\":{\"notice\":\"\\u4e70\\u65b9\\u786e\\u8ba4\\u8d2d\\u4e70\\u3002 \\u4ea4\\u6613\\u5fc5\\u987b\\u5305\\u62ec `2 * value` ether\\u3002 Ether \\u5c06\\u88ab\\u9501\\u4f4f\\uff0c\\u76f4\\u5230\\u8c03\\u7528 confirmReceived\\u3002\"},\"confirmReceived()\":{\"notice\":\"\\u786e\\u8ba4\\u60a8\\uff08\\u4e70\\u65b9\\uff09\\u5df2\\u7ecf\\u6536\\u5230\\u4e86\\u8be5\\u7269\\u54c1\\u3002 \\u8fd9\\u5c06\\u91ca\\u653e\\u9501\\u5b9a\\u7684 ether\\u3002\"},\"refundSeller()\":{\"notice\":\"\\u8be5\\u529f\\u80fd\\u4e3a\\u5356\\u5bb6\\u9000\\u6b3e\\uff0c \\u5373\\u9000\\u8fd8\\u5356\\u5bb6\\u9501\\u5b9a\\u7684\\u8d44\\u91d1\\u3002\"}},\"version\":1}},\"settings\":{\"compilationTarget\":{\"src/contracts/demo/Purchase.sol\":\"Purchase\"},\"evmVersion\":\"paris\",\"libraries\":{},\"metadata\":{\"bytecodeHash\":\"ipfs\"},\"optimizer\":{\"enabled\":true,\"runs\":200},\"remappings\":[\":ds-test/=lib/forge-std/lib/ds-test/src/\",\":forge-std/=lib/forge-std/src/\"],\"viaIR\":true},\"sources\":{\"src/contracts/demo/Purchase.sol\":{\"keccak256\":\"0xbacb68ad2e9f063b513dd0e1e11e845b6189f2775781c2495160dc897544984a\",\"license\":\"GPL-3.0\",\"urls\":[\"bzz-raw://b4b43c6d54685b03592ed520d8302588bd762ae96f2dbad7cffb2fbba6c2b78d\",\"dweb:/ipfs/QmUWBPLYNXCMWgvZGtj5ZqczFrMfUTkj2xGddNrpVQ7pzr\"]}},\"version\":1}","metadata":{"compiler":{"version":"0.8.18+commit.87f61d96"},"language":"Solidity","output":{"abi":[{"inputs":[],"stateMutability":"payable","type":"constructor"},{"inputs":[],"type":"error","name":"InvalidState"},{"inputs":[],"type":"error","name":"OnlyBuyer"},{"inputs":[],"type":"error","name":"OnlySeller"},{"inputs":[],"type":"error","name":"ValueNotEven"},{"inputs":[],"type":"event","name":"Aborted","anonymous":false},{"inputs":[],"type":"event","name":"ItemReceived","anonymous":false},{"inputs":[],"type":"event","name":"PurchaseConfirmed","anonymous":false},{"inputs":[],"type":"event","name":"SellerRefunded","anonymous":false},{"inputs":[],"stateMutability":"nonpayable","type":"function","name":"abort"},{"inputs":[],"stateMutability":"view","type":"function","name":"buyer","outputs":[{"internalType":"address payable","name":"","type":"address"}]},{"inputs":[],"stateMutability":"payable","type":"function","name":"confirmPurchase"},{"inputs":[],"stateMutability":"nonpayable","type":"function","name":"confirmReceived"},{"inputs":[],"stateMutability":"nonpayable","type":"function","name":"refundSeller"},{"inputs":[],"stateMutability":"view","type":"function","name":"seller","outputs":[{"internalType":"address payable","name":"","type":"address"}]},{"inputs":[],"stateMutability":"view","type":"function","name":"state","outputs":[{"internalType":"enum Purchase.State","name":"","type":"uint8"}]},{"inputs":[],"stateMutability":"view","type":"function","name":"value","outputs":[{"internalType":"uint256","name":"","type":"uint256"}]}],"devdoc":{"kind":"dev","methods":{},"version":1},"userdoc":{"kind":"user","methods":{"abort()":{"notice":"终止购买并收回 ether。 只能由卖方在合同锁定前能调用。"},"confirmPurchase()":{"notice":"买方确认购买。 交易必须包括 `2 * value` ether。 Ether 将被锁住，直到调用 confirmReceived。"},"confirmReceived()":{"notice":"确认您（买方）已经收到了该物品。 这将释放锁定的 ether。"},"refundSeller()":{"notice":"该功能为卖家退款， 即退还卖家锁定的资金。"}},"version":1}},"settings":{"remappings":["ds-test/=lib/forge-std/lib/ds-test/src/","forge-std/=lib/forge-std/src/"],"optimizer":{"enabled":true,"runs":200},"metadata":{"bytecodeHash":"ipfs"},"compilationTarget":{"src/contracts/demo/Purchase.sol":"Purchase"},"evmVersion":"paris","libraries":{},"viaIR":true},"sources":{"src/contracts/demo/Purchase.sol":{"keccak256":"0xbacb68ad2e9f063b513dd0e1e11e845b6189f2775781c2495160dc897544984a","urls":["bzz-raw://b4b43c6d54685b03592ed520d8302588bd762ae96f2dbad7cffb2fbba6c2b78d","dweb:/ipfs/QmUWBPLYNXCMWgvZGtj5ZqczFrMfUTkj2xGddNrpVQ7pzr"],"license":"GPL-3.0"}},"version":1},"ast":{"absolutePath":"src/contracts/demo/Purchase.sol","id":47125,"exportedSymbols":{"Purchase":[47124]},"nodeType":"SourceUnit","src":"37:4159:37","nodes":[{"id":46896,"nodeType":"PragmaDirective","src":"37:23:37","nodes":[],"literals":["solidity","^","0.8",".4"]},{"id":47124,"nodeType":"ContractDefinition","src":"1024:3170:37","nodes":[{"id":46898,"nodeType":"VariableDeclaration","src":"1049:20:37","nodes":[],"constant":false,"functionSelector":"3fa4f245","mutability":"mutable","name":"value","nameLocation":"1064:5:37","scope":47124,"stateVariable":true,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":46897,"name":"uint256","nodeType":"ElementaryTypeName","src":"1049:7:37","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"public"},{"id":46900,"nodeType":"VariableDeclaration","src":"1076:29:37","nodes":[],"constant":false,"functionSelector":"08551a53","mutability":"mutable","name":"seller","nameLocation":"1099:6:37","scope":47124,"stateVariable":true,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_address_payable","typeString":"address payable"},"typeName":{"id":46899,"name":"address","nodeType":"ElementaryTypeName","src":"1076:15:37","stateMutability":"payable","typeDescriptions":{"typeIdentifier":"t_address_payable","typeString":"address payable"}},"visibility":"public"},{"id":46902,"nodeType":"VariableDeclaration","src":"1112:28:37","nodes":[],"constant":false,"functionSelector":"7150d8ae","mutability":"mutable","name":"buyer","nameLocation":"1135:5:37","scope":47124,"stateVariable":true,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_address_payable","typeString":"address payable"},"typeName":{"id":46901,"name":"address","nodeType":"ElementaryTypeName","src":"1112:15:37","stateMutability":"payable","typeDescriptions":{"typeIdentifier":"t_address_payable","typeString":"address payable"}},"visibility":"public"},{"id":46907,"nodeType":"EnumDefinition","src":"1149:90:37","nodes":[],"canonicalName":"Purchase.State","members":[{"id":46903,"name":"Created","nameLocation":"1171:7:37","nodeType":"EnumValue","src":"1171:7:37"},{"id":46904,"name":"Locked","nameLocation":"1189:6:37","nodeType":"EnumValue","src":"1189:6:37"},{"id":46905,"name":"Release","nameLocation":"1206:7:37","nodeType":"EnumValue","src":"1206:7:37"},{"id":46906,"name":"Inactive","nameLocation":"1224:8:37","nodeType":"EnumValue","src":"1224:8:37"}],"name":"State","nameLocation":"1154:5:37"},{"id":46910,"nodeType":"VariableDeclaration","src":"1317:18:37","nodes":[],"constant":false,"functionSelector":"c19d93fb","mutability":"mutable","name":"state","nameLocation":"1330:5:37","scope":47124,"stateVariable":true,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_enum$_State_$46907","typeString":"enum Purchase.State"},"typeName":{"id":46909,"nodeType":"UserDefinedTypeName","pathNode":{"id":46908,"name":"State","nameLocations":["1317:5:37"],"nodeType":"IdentifierPath","referencedDeclaration":46907,"src":"1317:5:37"},"referencedDeclaration":46907,"src":"1317:5:37","typeDescriptions":{"typeIdentifier":"t_enum$_State_$46907","typeString":"enum Purchase.State"}},"visibility":"public"},{"id":46920,"nodeType":"ModifierDefinition","src":"1344:86:37","nodes":[],"body":{"id":46919,"nodeType":"Block","src":"1380:50:37","nodes":[],"statements":[{"expression":{"arguments":[{"id":46915,"name":"condition_","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":46912,"src":"1399:10:37","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_bool","typeString":"bool"}],"id":46914,"name":"require","nodeType":"Identifier","overloadedDeclarations":[-18,-18],"referencedDeclaration":-18,"src":"1391:7:37","typeDescriptions":{"typeIdentifier":"t_function_require_pure$_t_bool_$returns$__$","typeString":"function (bool) pure"}},"id":46916,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"1391:19:37","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_tuple$__$","typeString":"tuple()"}},"id":46917,"nodeType":"ExpressionStatement","src":"1391:19:37"},{"id":46918,"nodeType":"PlaceholderStatement","src":"1421:1:37"}]},"name":"condition","nameLocation":"1353:9:37","parameters":{"id":46913,"nodeType":"ParameterList","parameters":[{"constant":false,"id":46912,"mutability":"mutable","name":"condition_","nameLocation":"1368:10:37","nodeType":"VariableDeclaration","scope":46920,"src":"1363:15:37","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"},"typeName":{"id":46911,"name":"bool","nodeType":"ElementaryTypeName","src":"1363:4:37","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"visibility":"internal"}],"src":"1362:17:37"},"virtual":false,"visibility":"internal"},{"id":46923,"nodeType":"ErrorDefinition","src":"1487:18:37","nodes":[],"documentation":{"id":46921,"nodeType":"StructuredDocumentation","src":"1438:43:37","text":"只有买方可以调用这个函数。"},"errorSelector":"86efbb55","name":"OnlyBuyer","nameLocation":"1493:9:37","parameters":{"id":46922,"nodeType":"ParameterList","parameters":[],"src":"1502:2:37"}},{"id":46926,"nodeType":"ErrorDefinition","src":"1560:19:37","nodes":[],"documentation":{"id":46924,"nodeType":"StructuredDocumentation","src":"1511:43:37","text":"只有卖方可以调用这个函数。"},"errorSelector":"85d1f726","name":"OnlySeller","nameLocation":"1566:10:37","parameters":{"id":46925,"nodeType":"ParameterList","parameters":[],"src":"1576:2:37"}},{"id":46929,"nodeType":"ErrorDefinition","src":"1637:21:37","nodes":[],"documentation":{"id":46927,"nodeType":"StructuredDocumentation","src":"1585:46:37","text":"在当前状态下不能调用该函数。"},"errorSelector":"baf3f0f7","name":"InvalidState","nameLocation":"1643:12:37","parameters":{"id":46928,"nodeType":"ParameterList","parameters":[],"src":"1655:2:37"}},{"id":46932,"nodeType":"ErrorDefinition","src":"1704:21:37","nodes":[],"documentation":{"id":46930,"nodeType":"StructuredDocumentation","src":"1664:34:37","text":"提供的值必须是偶数。"},"errorSelector":"be3e4c42","name":"ValueNotEven","nameLocation":"1710:12:37","parameters":{"id":46931,"nodeType":"ParameterList","parameters":[],"src":"1722:2:37"}},{"id":46944,"nodeType":"ModifierDefinition","src":"1733:95:37","nodes":[],"body":{"id":46943,"nodeType":"Block","src":"1754:74:37","nodes":[],"statements":[{"condition":{"commonType":{"typeIdentifier":"t_address","typeString":"address"},"id":46937,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"expression":{"id":46934,"name":"msg","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":-15,"src":"1769:3:37","typeDescriptions":{"typeIdentifier":"t_magic_message","typeString":"msg"}},"id":46935,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberLocation":"1773:6:37","memberName":"sender","nodeType":"MemberAccess","src":"1769:10:37","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"nodeType":"BinaryOperation","operator":"!=","rightExpression":{"id":46936,"name":"buyer","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":46902,"src":"1783:5:37","typeDescriptions":{"typeIdentifier":"t_address_payable","typeString":"address payable"}},"src":"1769:19:37","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"id":46941,"nodeType":"IfStatement","src":"1765:43:37","trueBody":{"errorCall":{"arguments":[],"expression":{"argumentTypes":[],"id":46938,"name":"OnlyBuyer","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":46923,"src":"1797:9:37","typeDescriptions":{"typeIdentifier":"t_function_error_pure$__$returns$__$","typeString":"function () pure"}},"id":46939,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"1797:11:37","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_tuple$__$","typeString":"tuple()"}},"id":46940,"nodeType":"RevertStatement","src":"1790:18:37"}},{"id":46942,"nodeType":"PlaceholderStatement","src":"1819:1:37"}]},"name":"onlyBuyer","nameLocation":"1742:9:37","parameters":{"id":46933,"nodeType":"ParameterList","parameters":[],"src":"1751:2:37"},"virtual":false,"visibility":"internal"},{"id":46956,"nodeType":"ModifierDefinition","src":"1836:98:37","nodes":[],"body":{"id":46955,"nodeType":"Block","src":"1858:76:37","nodes":[],"statements":[{"condition":{"commonType":{"typeIdentifier":"t_address","typeString":"address"},"id":46949,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"expression":{"id":46946,"name":"msg","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":-15,"src":"1873:3:37","typeDescriptions":{"typeIdentifier":"t_magic_message","typeString":"msg"}},"id":46947,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberLocation":"1877:6:37","memberName":"sender","nodeType":"MemberAccess","src":"1873:10:37","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"nodeType":"BinaryOperation","operator":"!=","rightExpression":{"id":46948,"name":"seller","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":46900,"src":"1887:6:37","typeDescriptions":{"typeIdentifier":"t_address_payable","typeString":"address payable"}},"src":"1873:20:37","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"id":46953,"nodeType":"IfStatement","src":"1869:45:37","trueBody":{"errorCall":{"arguments":[],"expression":{"argumentTypes":[],"id":46950,"name":"OnlySeller","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":46926,"src":"1902:10:37","typeDescriptions":{"typeIdentifier":"t_function_error_pure$__$returns$__$","typeString":"function () pure"}},"id":46951,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"1902:12:37","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_tuple$__$","typeString":"tuple()"}},"id":46952,"nodeType":"RevertStatement","src":"1895:19:37"}},{"id":46954,"nodeType":"PlaceholderStatement","src":"1925:1:37"}]},"name":"onlySeller","nameLocation":"1845:10:37","parameters":{"id":46945,"nodeType":"ParameterList","parameters":[],"src":"1855:2:37"},"virtual":false,"visibility":"internal"},{"id":46970,"nodeType":"ModifierDefinition","src":"1942:104:37","nodes":[],"body":{"id":46969,"nodeType":"Block","src":"1973:73:37","nodes":[],"statements":[{"condition":{"commonType":{"typeIdentifier":"t_enum$_State_$46907","typeString":"enum Purchase.State"},"id":46963,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":46961,"name":"state","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":46910,"src":"1988:5:37","typeDescriptions":{"typeIdentifier":"t_enum$_State_$46907","typeString":"enum Purchase.State"}},"nodeType":"BinaryOperation","operator":"!=","rightExpression":{"id":46962,"name":"state_","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":46959,"src":"1997:6:37","typeDescriptions":{"typeIdentifier":"t_enum$_State_$46907","typeString":"enum Purchase.State"}},"src":"1988:15:37","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"id":46967,"nodeType":"IfStatement","src":"1984:42:37","trueBody":{"errorCall":{"arguments":[],"expression":{"argumentTypes":[],"id":46964,"name":"InvalidState","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":46929,"src":"2012:12:37","typeDescriptions":{"typeIdentifier":"t_function_error_pure$__$returns$__$","typeString":"function () pure"}},"id":46965,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"2012:14:37","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_tuple$__$","typeString":"tuple()"}},"id":46966,"nodeType":"RevertStatement","src":"2005:21:37"}},{"id":46968,"nodeType":"PlaceholderStatement","src":"2037:1:37"}]},"name":"inState","nameLocation":"1951:7:37","parameters":{"id":46960,"nodeType":"ParameterList","parameters":[{"constant":false,"id":46959,"mutability":"mutable","name":"state_","nameLocation":"1965:6:37","nodeType":"VariableDeclaration","scope":46970,"src":"1959:12:37","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_enum$_State_$46907","typeString":"enum Purchase.State"},"typeName":{"id":46958,"nodeType":"UserDefinedTypeName","pathNode":{"id":46957,"name":"State","nameLocations":["1959:5:37"],"nodeType":"IdentifierPath","referencedDeclaration":46907,"src":"1959:5:37"},"referencedDeclaration":46907,"src":"1959:5:37","typeDescriptions":{"typeIdentifier":"t_enum$_State_$46907","typeString":"enum Purchase.State"}},"visibility":"internal"}],"src":"1958:14:37"},"virtual":false,"visibility":"internal"},{"id":46972,"nodeType":"EventDefinition","src":"2054:16:37","nodes":[],"anonymous":false,"eventSelector":"72c874aeff0b183a56e2b79c71b46e1aed4dee5e09862134b8821ba2fddbf8bf","name":"Aborted","nameLocation":"2060:7:37","parameters":{"id":46971,"nodeType":"ParameterList","parameters":[],"src":"2067:2:37"}},{"id":46974,"nodeType":"EventDefinition","src":"2076:26:37","nodes":[],"anonymous":false,"eventSelector":"d5d55c8a68912e9a110618df8d5e2e83b8d83211c57a8ddd1203df92885dc881","name":"PurchaseConfirmed","nameLocation":"2082:17:37","parameters":{"id":46973,"nodeType":"ParameterList","parameters":[],"src":"2099:2:37"}},{"id":46976,"nodeType":"EventDefinition","src":"2108:21:37","nodes":[],"anonymous":false,"eventSelector":"e89152acd703c9d8c7d28829d443260b411454d45394e7995815140c8cbcbcf7","name":"ItemReceived","nameLocation":"2114:12:37","parameters":{"id":46975,"nodeType":"ParameterList","parameters":[],"src":"2126:2:37"}},{"id":46978,"nodeType":"EventDefinition","src":"2135:23:37","nodes":[],"anonymous":false,"eventSelector":"fda69c32bcfdba840a167777906b173b607eb8b4d8853b97a80d26e613d858db","name":"SellerRefunded","nameLocation":"2141:14:37","parameters":{"id":46977,"nodeType":"ParameterList","parameters":[],"src":"2155:2:37"}},{"id":47008,"nodeType":"FunctionDefinition","src":"2308:163:37","nodes":[],"body":{"id":47007,"nodeType":"Block","src":"2330:141:37","nodes":[],"statements":[{"expression":{"id":46987,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftHandSide":{"id":46981,"name":"seller","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":46900,"src":"2341:6:37","typeDescriptions":{"typeIdentifier":"t_address_payable","typeString":"address payable"}},"nodeType":"Assignment","operator":"=","rightHandSide":{"arguments":[{"expression":{"id":46984,"name":"msg","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":-15,"src":"2358:3:37","typeDescriptions":{"typeIdentifier":"t_magic_message","typeString":"msg"}},"id":46985,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberLocation":"2362:6:37","memberName":"sender","nodeType":"MemberAccess","src":"2358:10:37","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_address","typeString":"address"}],"id":46983,"isConstant":false,"isLValue":false,"isPure":true,"lValueRequested":false,"nodeType":"ElementaryTypeNameExpression","src":"2350:8:37","typeDescriptions":{"typeIdentifier":"t_type$_t_address_payable_$","typeString":"type(address payable)"},"typeName":{"id":46982,"name":"address","nodeType":"ElementaryTypeName","src":"2350:8:37","stateMutability":"payable","typeDescriptions":{}}},"id":46986,"isConstant":false,"isLValue":false,"isPure":false,"kind":"typeConversion","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"2350:19:37","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_address_payable","typeString":"address payable"}},"src":"2341:28:37","typeDescriptions":{"typeIdentifier":"t_address_payable","typeString":"address payable"}},"id":46988,"nodeType":"ExpressionStatement","src":"2341:28:37"},{"expression":{"id":46994,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftHandSide":{"id":46989,"name":"value","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":46898,"src":"2380:5:37","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"Assignment","operator":"=","rightHandSide":{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":46993,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"expression":{"id":46990,"name":"msg","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":-15,"src":"2388:3:37","typeDescriptions":{"typeIdentifier":"t_magic_message","typeString":"msg"}},"id":46991,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberLocation":"2392:5:37","memberName":"value","nodeType":"MemberAccess","src":"2388:9:37","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":"/","rightExpression":{"hexValue":"32","id":46992,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"2400:1:37","typeDescriptions":{"typeIdentifier":"t_rational_2_by_1","typeString":"int_const 2"},"value":"2"},"src":"2388:13:37","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"2380:21:37","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"id":46995,"nodeType":"ExpressionStatement","src":"2380:21:37"},{"condition":{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":47002,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"components":[{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":46998,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"hexValue":"32","id":46996,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"2417:1:37","typeDescriptions":{"typeIdentifier":"t_rational_2_by_1","typeString":"int_const 2"},"value":"2"},"nodeType":"BinaryOperation","operator":"*","rightExpression":{"id":46997,"name":"value","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":46898,"src":"2421:5:37","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"2417:9:37","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"id":46999,"isConstant":false,"isInlineArray":false,"isLValue":false,"isPure":false,"lValueRequested":false,"nodeType":"TupleExpression","src":"2416:11:37","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":"!=","rightExpression":{"expression":{"id":47000,"name":"msg","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":-15,"src":"2431:3:37","typeDescriptions":{"typeIdentifier":"t_magic_message","typeString":"msg"}},"id":47001,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberLocation":"2435:5:37","memberName":"value","nodeType":"MemberAccess","src":"2431:9:37","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"2416:24:37","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"id":47006,"nodeType":"IfStatement","src":"2412:51:37","trueBody":{"errorCall":{"arguments":[],"expression":{"argumentTypes":[],"id":47003,"name":"ValueNotEven","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":46932,"src":"2449:12:37","typeDescriptions":{"typeIdentifier":"t_function_error_pure$__$returns$__$","typeString":"function () pure"}},"id":47004,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"2449:14:37","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_tuple$__$","typeString":"tuple()"}},"id":47005,"nodeType":"RevertStatement","src":"2442:21:37"}}]},"implemented":true,"kind":"constructor","modifiers":[],"name":"","nameLocation":"-1:-1:-1","parameters":{"id":46979,"nodeType":"ParameterList","parameters":[],"src":"2319:2:37"},"returnParameters":{"id":46980,"nodeType":"ParameterList","parameters":[],"src":"2330:0:37"},"scope":47124,"stateMutability":"payable","virtual":false,"visibility":"public"},{"id":47037,"nodeType":"FunctionDefinition","src":"2574:382:37","nodes":[],"body":{"id":47036,"nodeType":"Block","src":"2634:322:37","nodes":[],"statements":[{"eventCall":{"arguments":[],"expression":{"argumentTypes":[],"id":47018,"name":"Aborted","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":46972,"src":"2650:7:37","typeDescriptions":{"typeIdentifier":"t_function_event_nonpayable$__$returns$__$","typeString":"function ()"}},"id":47019,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"2650:9:37","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_tuple$__$","typeString":"tuple()"}},"id":47020,"nodeType":"EmitStatement","src":"2645:14:37"},{"expression":{"id":47024,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftHandSide":{"id":47021,"name":"state","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":46910,"src":"2670:5:37","typeDescriptions":{"typeIdentifier":"t_enum$_State_$46907","typeString":"enum Purchase.State"}},"nodeType":"Assignment","operator":"=","rightHandSide":{"expression":{"id":47022,"name":"State","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":46907,"src":"2678:5:37","typeDescriptions":{"typeIdentifier":"t_type$_t_enum$_State_$46907_$","typeString":"type(enum Purchase.State)"}},"id":47023,"isConstant":false,"isLValue":false,"isPure":true,"lValueRequested":false,"memberLocation":"2684:8:37","memberName":"Inactive","nodeType":"MemberAccess","referencedDeclaration":46906,"src":"2678:14:37","typeDescriptions":{"typeIdentifier":"t_enum$_State_$46907","typeString":"enum Purchase.State"}},"src":"2670:22:37","typeDescriptions":{"typeIdentifier":"t_enum$_State_$46907","typeString":"enum Purchase.State"}},"id":47025,"nodeType":"ExpressionStatement","src":"2670:22:37"},{"expression":{"arguments":[{"expression":{"arguments":[{"id":47031,"name":"this","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":-28,"src":"2934:4:37","typeDescriptions":{"typeIdentifier":"t_contract$_Purchase_$47124","typeString":"contract Purchase"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_contract$_Purchase_$47124","typeString":"contract Purchase"}],"id":47030,"isConstant":false,"isLValue":false,"isPure":true,"lValueRequested":false,"nodeType":"ElementaryTypeNameExpression","src":"2926:7:37","typeDescriptions":{"typeIdentifier":"t_type$_t_address_$","typeString":"type(address)"},"typeName":{"id":47029,"name":"address","nodeType":"ElementaryTypeName","src":"2926:7:37","typeDescriptions":{}}},"id":47032,"isConstant":false,"isLValue":false,"isPure":false,"kind":"typeConversion","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"2926:13:37","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"id":47033,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberLocation":"2940:7:37","memberName":"balance","nodeType":"MemberAccess","src":"2926:21:37","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_uint256","typeString":"uint256"}],"expression":{"id":47026,"name":"seller","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":46900,"src":"2910:6:37","typeDescriptions":{"typeIdentifier":"t_address_payable","typeString":"address payable"}},"id":47028,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberLocation":"2917:8:37","memberName":"transfer","nodeType":"MemberAccess","src":"2910:15:37","typeDescriptions":{"typeIdentifier":"t_function_transfer_nonpayable$_t_uint256_$returns$__$","typeString":"function (uint256)"}},"id":47034,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"2910:38:37","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_tuple$__$","typeString":"tuple()"}},"id":47035,"nodeType":"ExpressionStatement","src":"2910:38:37"}]},"documentation":{"id":47009,"nodeType":"StructuredDocumentation","src":"2479:89:37","text":"终止购买并收回 ether。\n 只能由卖方在合同锁定前能调用。"},"functionSelector":"35a063b4","implemented":true,"kind":"function","modifiers":[{"id":47012,"kind":"modifierInvocation","modifierName":{"id":47011,"name":"onlySeller","nameLocations":["2600:10:37"],"nodeType":"IdentifierPath","referencedDeclaration":46956,"src":"2600:10:37"},"nodeType":"ModifierInvocation","src":"2600:10:37"},{"arguments":[{"expression":{"id":47014,"name":"State","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":46907,"src":"2619:5:37","typeDescriptions":{"typeIdentifier":"t_type$_t_enum$_State_$46907_$","typeString":"type(enum Purchase.State)"}},"id":47015,"isConstant":false,"isLValue":false,"isPure":true,"lValueRequested":false,"memberLocation":"2625:7:37","memberName":"Created","nodeType":"MemberAccess","referencedDeclaration":46903,"src":"2619:13:37","typeDescriptions":{"typeIdentifier":"t_enum$_State_$46907","typeString":"enum Purchase.State"}}],"id":47016,"kind":"modifierInvocation","modifierName":{"id":47013,"name":"inState","nameLocations":["2611:7:37"],"nodeType":"IdentifierPath","referencedDeclaration":46970,"src":"2611:7:37"},"nodeType":"ModifierInvocation","src":"2611:22:37"}],"name":"abort","nameLocation":"2583:5:37","parameters":{"id":47010,"nodeType":"ParameterList","parameters":[],"src":"2588:2:37"},"returnParameters":{"id":47017,"nodeType":"ParameterList","parameters":[],"src":"2634:0:37"},"scope":47124,"stateMutability":"nonpayable","virtual":false,"visibility":"external"},{"id":47071,"nodeType":"FunctionDefinition","src":"3106:256:37","nodes":[],"body":{"id":47070,"nodeType":"Block","src":"3250:112:37","nodes":[],"statements":[{"eventCall":{"arguments":[],"expression":{"argumentTypes":[],"id":47054,"name":"PurchaseConfirmed","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":46974,"src":"3266:17:37","typeDescriptions":{"typeIdentifier":"t_function_event_nonpayable$__$returns$__$","typeString":"function ()"}},"id":47055,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"3266:19:37","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_tuple$__$","typeString":"tuple()"}},"id":47056,"nodeType":"EmitStatement","src":"3261:24:37"},{"expression":{"id":47063,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftHandSide":{"id":47057,"name":"buyer","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":46902,"src":"3296:5:37","typeDescriptions":{"typeIdentifier":"t_address_payable","typeString":"address payable"}},"nodeType":"Assignment","operator":"=","rightHandSide":{"arguments":[{"expression":{"id":47060,"name":"msg","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":-15,"src":"3312:3:37","typeDescriptions":{"typeIdentifier":"t_magic_message","typeString":"msg"}},"id":47061,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberLocation":"3316:6:37","memberName":"sender","nodeType":"MemberAccess","src":"3312:10:37","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_address","typeString":"address"}],"id":47059,"isConstant":false,"isLValue":false,"isPure":true,"lValueRequested":false,"nodeType":"ElementaryTypeNameExpression","src":"3304:8:37","typeDescriptions":{"typeIdentifier":"t_type$_t_address_payable_$","typeString":"type(address payable)"},"typeName":{"id":47058,"name":"address","nodeType":"ElementaryTypeName","src":"3304:8:37","stateMutability":"payable","typeDescriptions":{}}},"id":47062,"isConstant":false,"isLValue":false,"isPure":false,"kind":"typeConversion","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"3304:19:37","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_address_payable","typeString":"address payable"}},"src":"3296:27:37","typeDescriptions":{"typeIdentifier":"t_address_payable","typeString":"address payable"}},"id":47064,"nodeType":"ExpressionStatement","src":"3296:27:37"},{"expression":{"id":47068,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftHandSide":{"id":47065,"name":"state","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":46910,"src":"3334:5:37","typeDescriptions":{"typeIdentifier":"t_enum$_State_$46907","typeString":"enum Purchase.State"}},"nodeType":"Assignment","operator":"=","rightHandSide":{"expression":{"id":47066,"name":"State","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":46907,"src":"3342:5:37","typeDescriptions":{"typeIdentifier":"t_type$_t_enum$_State_$46907_$","typeString":"type(enum Purchase.State)"}},"id":47067,"isConstant":false,"isLValue":false,"isPure":true,"lValueRequested":false,"memberLocation":"3348:6:37","memberName":"Locked","nodeType":"MemberAccess","referencedDeclaration":46904,"src":"3342:12:37","typeDescriptions":{"typeIdentifier":"t_enum$_State_$46907","typeString":"enum Purchase.State"}},"src":"3334:20:37","typeDescriptions":{"typeIdentifier":"t_enum$_State_$46907","typeString":"enum Purchase.State"}},"id":47069,"nodeType":"ExpressionStatement","src":"3334:20:37"}]},"documentation":{"id":47038,"nodeType":"StructuredDocumentation","src":"2964:136:37","text":"买方确认购买。\n 交易必须包括 `2 * value` ether。\n Ether 将被锁住，直到调用 confirmReceived。"},"functionSelector":"d6960697","implemented":true,"kind":"function","modifiers":[{"arguments":[{"expression":{"id":47041,"name":"State","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":46907,"src":"3185:5:37","typeDescriptions":{"typeIdentifier":"t_type$_t_enum$_State_$46907_$","typeString":"type(enum Purchase.State)"}},"id":47042,"isConstant":false,"isLValue":false,"isPure":true,"lValueRequested":false,"memberLocation":"3191:7:37","memberName":"Created","nodeType":"MemberAccess","referencedDeclaration":46903,"src":"3185:13:37","typeDescriptions":{"typeIdentifier":"t_enum$_State_$46907","typeString":"enum Purchase.State"}}],"id":47043,"kind":"modifierInvocation","modifierName":{"id":47040,"name":"inState","nameLocations":["3177:7:37"],"nodeType":"IdentifierPath","referencedDeclaration":46970,"src":"3177:7:37"},"nodeType":"ModifierInvocation","src":"3177:22:37"},{"arguments":[{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":47051,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"expression":{"id":47045,"name":"msg","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":-15,"src":"3219:3:37","typeDescriptions":{"typeIdentifier":"t_magic_message","typeString":"msg"}},"id":47046,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberLocation":"3223:5:37","memberName":"value","nodeType":"MemberAccess","src":"3219:9:37","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":"==","rightExpression":{"components":[{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":47049,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"hexValue":"32","id":47047,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"3233:1:37","typeDescriptions":{"typeIdentifier":"t_rational_2_by_1","typeString":"int_const 2"},"value":"2"},"nodeType":"BinaryOperation","operator":"*","rightExpression":{"id":47048,"name":"value","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":46898,"src":"3237:5:37","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"3233:9:37","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"id":47050,"isConstant":false,"isInlineArray":false,"isLValue":false,"isPure":false,"lValueRequested":false,"nodeType":"TupleExpression","src":"3232:11:37","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"3219:24:37","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}}],"id":47052,"kind":"modifierInvocation","modifierName":{"id":47044,"name":"condition","nameLocations":["3209:9:37"],"nodeType":"IdentifierPath","referencedDeclaration":46920,"src":"3209:9:37"},"nodeType":"ModifierInvocation","src":"3209:35:37"}],"name":"confirmPurchase","nameLocation":"3115:15:37","parameters":{"id":47039,"nodeType":"ParameterList","parameters":[],"src":"3130:2:37"},"returnParameters":{"id":47053,"nodeType":"ParameterList","parameters":[],"src":"3250:0:37"},"scope":47124,"stateMutability":"payable","virtual":false,"visibility":"external"},{"id":47096,"nodeType":"FunctionDefinition","src":"3468:314:37","nodes":[],"body":{"id":47095,"nodeType":"Block","src":"3536:246:37","nodes":[],"statements":[{"eventCall":{"arguments":[],"expression":{"argumentTypes":[],"id":47081,"name":"ItemReceived","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":46976,"src":"3552:12:37","typeDescriptions":{"typeIdentifier":"t_function_event_nonpayable$__$returns$__$","typeString":"function ()"}},"id":47082,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"3552:14:37","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_tuple$__$","typeString":"tuple()"}},"id":47083,"nodeType":"EmitStatement","src":"3547:19:37"},{"expression":{"id":47087,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftHandSide":{"id":47084,"name":"state","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":46910,"src":"3719:5:37","typeDescriptions":{"typeIdentifier":"t_enum$_State_$46907","typeString":"enum Purchase.State"}},"nodeType":"Assignment","operator":"=","rightHandSide":{"expression":{"id":47085,"name":"State","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":46907,"src":"3727:5:37","typeDescriptions":{"typeIdentifier":"t_type$_t_enum$_State_$46907_$","typeString":"type(enum Purchase.State)"}},"id":47086,"isConstant":false,"isLValue":false,"isPure":true,"lValueRequested":false,"memberLocation":"3733:7:37","memberName":"Release","nodeType":"MemberAccess","referencedDeclaration":46905,"src":"3727:13:37","typeDescriptions":{"typeIdentifier":"t_enum$_State_$46907","typeString":"enum Purchase.State"}},"src":"3719:21:37","typeDescriptions":{"typeIdentifier":"t_enum$_State_$46907","typeString":"enum Purchase.State"}},"id":47088,"nodeType":"ExpressionStatement","src":"3719:21:37"},{"expression":{"arguments":[{"id":47092,"name":"value","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":46898,"src":"3768:5:37","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_uint256","typeString":"uint256"}],"expression":{"id":47089,"name":"buyer","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":46902,"src":"3753:5:37","typeDescriptions":{"typeIdentifier":"t_address_payable","typeString":"address payable"}},"id":47091,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberLocation":"3759:8:37","memberName":"transfer","nodeType":"MemberAccess","src":"3753:14:37","typeDescriptions":{"typeIdentifier":"t_function_transfer_nonpayable$_t_uint256_$returns$__$","typeString":"function (uint256)"}},"id":47093,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"3753:21:37","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_tuple$__$","typeString":"tuple()"}},"id":47094,"nodeType":"ExpressionStatement","src":"3753:21:37"}]},"documentation":{"id":47072,"nodeType":"StructuredDocumentation","src":"3370:92:37","text":"确认您（买方）已经收到了该物品。\n 这将释放锁定的 ether。"},"functionSelector":"73fac6f0","implemented":true,"kind":"function","modifiers":[{"id":47075,"kind":"modifierInvocation","modifierName":{"id":47074,"name":"onlyBuyer","nameLocations":["3504:9:37"],"nodeType":"IdentifierPath","referencedDeclaration":46944,"src":"3504:9:37"},"nodeType":"ModifierInvocation","src":"3504:9:37"},{"arguments":[{"expression":{"id":47077,"name":"State","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":46907,"src":"3522:5:37","typeDescriptions":{"typeIdentifier":"t_type$_t_enum$_State_$46907_$","typeString":"type(enum Purchase.State)"}},"id":47078,"isConstant":false,"isLValue":false,"isPure":true,"lValueRequested":false,"memberLocation":"3528:6:37","memberName":"Locked","nodeType":"MemberAccess","referencedDeclaration":46904,"src":"3522:12:37","typeDescriptions":{"typeIdentifier":"t_enum$_State_$46907","typeString":"enum Purchase.State"}}],"id":47079,"kind":"modifierInvocation","modifierName":{"id":47076,"name":"inState","nameLocations":["3514:7:37"],"nodeType":"IdentifierPath","referencedDeclaration":46970,"src":"3514:7:37"},"nodeType":"ModifierInvocation","src":"3514:21:37"}],"name":"confirmReceived","nameLocation":"3477:15:37","parameters":{"id":47073,"nodeType":"ParameterList","parameters":[],"src":"3492:2:37"},"returnParameters":{"id":47080,"nodeType":"ParameterList","parameters":[],"src":"3536:0:37"},"scope":47124,"stateMutability":"nonpayable","virtual":false,"visibility":"external"},{"id":47123,"nodeType":"FunctionDefinition","src":"3870:321:37","nodes":[],"body":{"id":47122,"nodeType":"Block","src":"3937:254:37","nodes":[],"statements":[{"eventCall":{"arguments":[],"expression":{"argumentTypes":[],"id":47106,"name":"SellerRefunded","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":46978,"src":"3953:14:37","typeDescriptions":{"typeIdentifier":"t_function_event_nonpayable$__$returns$__$","typeString":"function ()"}},"id":47107,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"3953:16:37","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_tuple$__$","typeString":"tuple()"}},"id":47108,"nodeType":"EmitStatement","src":"3948:21:37"},{"expression":{"id":47112,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftHandSide":{"id":47109,"name":"state","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":46910,"src":"4122:5:37","typeDescriptions":{"typeIdentifier":"t_enum$_State_$46907","typeString":"enum Purchase.State"}},"nodeType":"Assignment","operator":"=","rightHandSide":{"expression":{"id":47110,"name":"State","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":46907,"src":"4130:5:37","typeDescriptions":{"typeIdentifier":"t_type$_t_enum$_State_$46907_$","typeString":"type(enum Purchase.State)"}},"id":47111,"isConstant":false,"isLValue":false,"isPure":true,"lValueRequested":false,"memberLocation":"4136:8:37","memberName":"Inactive","nodeType":"MemberAccess","referencedDeclaration":46906,"src":"4130:14:37","typeDescriptions":{"typeIdentifier":"t_enum$_State_$46907","typeString":"enum Purchase.State"}},"src":"4122:22:37","typeDescriptions":{"typeIdentifier":"t_enum$_State_$46907","typeString":"enum Purchase.State"}},"id":47113,"nodeType":"ExpressionStatement","src":"4122:22:37"},{"expression":{"arguments":[{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":47119,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"hexValue":"33","id":47117,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"4173:1:37","typeDescriptions":{"typeIdentifier":"t_rational_3_by_1","typeString":"int_const 3"},"value":"3"},"nodeType":"BinaryOperation","operator":"*","rightExpression":{"id":47118,"name":"value","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":46898,"src":"4177:5:37","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"4173:9:37","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_uint256","typeString":"uint256"}],"expression":{"id":47114,"name":"seller","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":46900,"src":"4157:6:37","typeDescriptions":{"typeIdentifier":"t_address_payable","typeString":"address payable"}},"id":47116,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberLocation":"4164:8:37","memberName":"transfer","nodeType":"MemberAccess","src":"4157:15:37","typeDescriptions":{"typeIdentifier":"t_function_transfer_nonpayable$_t_uint256_$returns$__$","typeString":"function (uint256)"}},"id":47120,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"4157:26:37","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_tuple$__$","typeString":"tuple()"}},"id":47121,"nodeType":"ExpressionStatement","src":"4157:26:37"}]},"documentation":{"id":47097,"nodeType":"StructuredDocumentation","src":"3790:74:37","text":"该功能为卖家退款，\n 即退还卖家锁定的资金。"},"functionSelector":"c7981b1b","implemented":true,"kind":"function","modifiers":[{"id":47100,"kind":"modifierInvocation","modifierName":{"id":47099,"name":"onlySeller","nameLocations":["3903:10:37"],"nodeType":"IdentifierPath","referencedDeclaration":46956,"src":"3903:10:37"},"nodeType":"ModifierInvocation","src":"3903:10:37"},{"arguments":[{"expression":{"id":47102,"name":"State","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":46907,"src":"3922:5:37","typeDescriptions":{"typeIdentifier":"t_type$_t_enum$_State_$46907_$","typeString":"type(enum Purchase.State)"}},"id":47103,"isConstant":false,"isLValue":false,"isPure":true,"lValueRequested":false,"memberLocation":"3928:7:37","memberName":"Release","nodeType":"MemberAccess","referencedDeclaration":46905,"src":"3922:13:37","typeDescriptions":{"typeIdentifier":"t_enum$_State_$46907","typeString":"enum Purchase.State"}}],"id":47104,"kind":"modifierInvocation","modifierName":{"id":47101,"name":"inState","nameLocations":["3914:7:37"],"nodeType":"IdentifierPath","referencedDeclaration":46970,"src":"3914:7:37"},"nodeType":"ModifierInvocation","src":"3914:22:37"}],"name":"refundSeller","nameLocation":"3879:12:37","parameters":{"id":47098,"nodeType":"ParameterList","parameters":[],"src":"3891:2:37"},"returnParameters":{"id":47105,"nodeType":"ParameterList","parameters":[],"src":"3937:0:37"},"scope":47124,"stateMutability":"nonpayable","virtual":false,"visibility":"external"}],"abstract":false,"baseContracts":[],"canonicalName":"Purchase","contractDependencies":[],"contractKind":"contract","fullyImplemented":true,"linearizedBaseContracts":[47124],"name":"Purchase","nameLocation":"1033:8:37","scope":47125,"usedErrors":[46923,46926,46929,46932]}],"license":"GPL-3.0"},"id":37}